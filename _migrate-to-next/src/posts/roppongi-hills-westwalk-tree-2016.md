---
title: Roppongi Hills Artelligent Christmas 2016 ウェストウォーク イルミネーションのLED制御を担当しました
date: 2016/11/24 18:57:35
updated: 2016/11/24 18:57:35
author: hideo-m
---
六本木ヒルズで開催されているArtelligent Christmas 2016にて、11月18日から、ウェストウォーク イルミネーションが始まりました。今年は光のバルーンのクリスマスツリーということで、導電性インクで作ったLED回路シートが内蔵された風船を約230個使って作られたクリスマスツリーが展示されています。
期間中は、11時から24時まで点灯しています。特に17時からは、30分おきに素敵な音楽と同期したイルミネーションをお楽しみいただけます。

今回、ライデンはこのクリスマスツリーのLEDを制御するシステムの設計と構築を担当しましたので、今回はその仕組みをご紹介します。

<!-- more -->

## ハードウェア

バルーンに内蔵されたLED回路は、薄い透明シートに配線用の回路を導電性インクで印刷し、そのシートにLEDを貼り付けて作られています。
LEDにはシリアル通信で制御可能なフルカラーLED、[WS2812B](http://akizukidenshi.com/catalog/g/gI-07915/)が使われています。

ところで、Lチカ（LEDをチカチカ光らせる）と言えばArduinoですね。今回利用しているフルカラーLEDの[WS2812BをArduinoで制御するためのライブラリ](https://github.com/adafruit/Adafruit_NeoPixel)も公開されており、実際利用した事例もあります。

ただし、今回は、以下の理由でArduinoを利用しませんでした。

* バルーンごとにLED制御信号の回路が独立しているため、必要なArduinoの台数が多くなってしまう
* Arduinoは電源供給能力に限りがあるので、今回のように多数のLEDを同時に光らせる場合は、別途電源回路を用意する必要がある

上記の問題に対応するため、今回はLED制御専用のハードウェアを利用しています。

フルカラーLEDを制御するための装置はピクセルコントローラーと呼ばれ、いくつかの製品が市場にあります。
リサーチの結果、今回は、[Advatek Lights](http://www.advateklights.com/)社のPixLite 16という製品を使いました。PixLite 16はLAN経由でDMXを送信するsACN(E1.31)やArt-Netに対応し、1台で最大5,440個のLEDを制御できます。（DMXは、照明制御で一般的に使われるプロトコルです）

今回はボックスケースに、ピクセルコントローラーと電源（DC-DCコンバーター）、放熱用ファン、それにLEDに接続するための専用基板（今回のために設計した特注品です）を組み合わせています。ピクセルコントローラーは1台あたり16ポートあり、今回はこれを15台用意しています。

<figure class="centered">{% img /img/post/roppongi-hills-westwalk-tree-2016/controller.jpg ピクセルコントローラー %}</figure>

15台、240ポート分を制作するのはさすがに骨が折れました。配線にひたすら圧着端子をつける作業など、普段キーボードしか叩かない身にはつらいものがありましたが、ライデンのメンバー総出で制作し、何とか完成にこぎつけました。


## ソフトウェア

クリスマスツリーに使われている約230個の風船は、段ごとに絵柄が異なっており、使われているLEDの個数もそれぞれ異なります。
単純ではない形状のLEDを多数制御する必要があるため、以下の要件でLED制御用ソフトウェアを評価選定する必要がありました。

* sACN(E1.31)またはArt-Netに対応している
* GUIでプレビューできる
* LEDをグループ化して、グループ単位で制御できる
* できるだけ、操作が簡単

リサーチの結果、いくつかのソフトウェアを見つけることができました。海外では自宅をクリスマスの電飾で飾る用途で、こういったLED制御用ソフトの需要があるようです。

各ソフトウェアを評価して、今回は[xLights/Nutcracker](http://xlights.org/)を使用しました。xLightsは非常に高性能、かつ使い勝手の良いソフトウェアで、今回のプロジェクトはこのソフトとの出会いがなければ不可能だったと言っても過言ではありません。アートディレクションの内容をかなりの精度とスピード感で実装できました。

<figure class="centered">{% img /img/post/roppongi-hills-westwalk-tree-2016/xlights.png xLights %}</figure>

Roppongi Hills Artelligent Christmas 2016 ウェストウォーク イルミネーションは12月25日までご覧いただけます。お近くにおいでの際は、ぜひご覧ください。
